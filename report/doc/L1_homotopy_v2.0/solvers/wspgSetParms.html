<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of wspgSetParms</title>
  <meta name="keywords" content="wspgSetParms">
  <meta name="description" content="SPGSETPARMS  Set options for SPGL1">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html &copy; 2005 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../../m2html.css">
  <script type="text/javascript">
    if (top.frames.length == 0) { top.location = "../../index.html"; };
  </script>
</head>
<body>
<a name="_top"></a>
<!-- ../menu.html L1_homotopy_v2.0 --><!-- menu.html solvers -->
<h1>wspgSetParms
</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="box"><strong>SPGSETPARMS  Set options for SPGL1</strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="box"><strong>function options = wspgSetParms(varargin) </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="fragment"><pre class="comment">SPGSETPARMS  Set options for SPGL1

   options = spgSetParms('param1',val1,'param2',val2,...) creates an
   options structure in which the named parameters have the specified
   values.  Unspecified parameters are empty and their default
   values are used.
   
   spgSetParms with no input arguments and no output arguments
   displays all parameter names and their possible values.

   options = spgSetParms (with no input arguments) creates an options
   structure where all the fields are empty.

   spgSetParms.m
   $Id: spgSetParms.m 31 2011-01-07 02:16:23Z admin $</pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
This function calls:
<ul style="list-style-image:url(../../matlabicon.gif)">
</ul>
This function is called by:
<ul style="list-style-image:url(../../matlabicon.gif)">
<li><a href="../../L1_homotopy_v2.0/WeightedBPDN/src/script_simulation_adpWBPDN.html" class="code" title="">script_simulation_adpWBPDN</a>	partial script for running different solvers for adaptive reweighting</li><li><a href="wspgl1.html" class="code" title="function [x,r,g,info] = wspgl1( A, b, tau, sigma, x, options )">wspgl1</a>	SPGL1  Solve basis pursuit, basis pursuit denoise, and LASSO</li></ul>
<!-- crossreference -->



<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="fragment"><pre>0001 <a name="_sub0" href="#_subfunctions" class="code">function options = wspgSetParms(varargin)</a>
0002 <span class="comment">%SPGSETPARMS  Set options for SPGL1</span>
0003 <span class="comment">%</span>
0004 <span class="comment">%   options = spgSetParms('param1',val1,'param2',val2,...) creates an</span>
0005 <span class="comment">%   options structure in which the named parameters have the specified</span>
0006 <span class="comment">%   values.  Unspecified parameters are empty and their default</span>
0007 <span class="comment">%   values are used.</span>
0008 <span class="comment">%</span>
0009 <span class="comment">%   spgSetParms with no input arguments and no output arguments</span>
0010 <span class="comment">%   displays all parameter names and their possible values.</span>
0011 <span class="comment">%</span>
0012 <span class="comment">%   options = spgSetParms (with no input arguments) creates an options</span>
0013 <span class="comment">%   structure where all the fields are empty.</span>
0014 <span class="comment">%</span>
0015 <span class="comment">%   spgSetParms.m</span>
0016 <span class="comment">%   $Id: spgSetParms.m 31 2011-01-07 02:16:23Z admin $</span>
0017 
0018 <span class="comment">% Print out possible values of properties.</span>
0019 <span class="keyword">if</span> nargin == 0 &amp;&amp; nargout == 0
0020    fprintf(<span class="string">' Default parameters for l1Set.m:\n'</span>);
0021    fprintf(<span class="string">'        fid : [ positive integer        |     1 ]\n'</span>);
0022    fprintf(<span class="string">'  verbosity : [ integer: 1, 2, or 3     |     3 ]\n'</span>);
0023    fprintf(<span class="string">' iterations : [ positive integer        |  10*m ]\n'</span>);
0024    fprintf(<span class="string">'  nPrevVals : [ positive integer        |    10 ]\n'</span>);
0025    fprintf(<span class="string">'      bpTol : [ positive scalar         | 1e-06 ]\n'</span>);
0026    fprintf(<span class="string">'     optTol : [ positive scalar         | 1e-04 ]\n'</span>);
0027    fprintf(<span class="string">'     decTol : [ positive scalar         | 1e-04 ]\n'</span>);   
0028    fprintf(<span class="string">'    stepMin : [ positive scalar         | 1e-16 ]\n'</span>);
0029    fprintf(<span class="string">'    stepMax : [ positive scalar         | 1e+05 ]\n'</span>);
0030    fprintf(<span class="string">' rootMethod : [ 1=linear, 2=quadratic   |     2 ]\n'</span>);
0031    fprintf(<span class="string">'activeSetIt : [ positive integer        |   Inf ]\n'</span>);
0032    fprintf(<span class="string">'subspaceMin : [ 0=no, 1=yes             |     0 ]\n'</span>);
0033    fprintf(<span class="string">'  iscomplex : [ 0=no, 1=yes, NaN=auto   |   NaN ]\n'</span>);
0034    fprintf(<span class="string">'  maxMatvec : [ positive integer        |   Inf ]\n'</span>);
0035    fprintf(<span class="string">'    weights : [ vector                  |     1 ]\n'</span>);
0036    fprintf(<span class="string">'      omega : [ vector                  |     1 ]\n'</span>);
0037    fprintf(<span class="string">'    project : [ projection function     |    @()]\n'</span>);
0038    fprintf(<span class="string">'primal_norm : [ primal norm eval fun    |    @()]\n'</span>);
0039    fprintf(<span class="string">'  dual_norm : [ dual norm eval fun      |    @()]\n'</span>);
0040    fprintf(<span class="string">'   Kaczmarz : [ 0=no, 1=proj, 2=rtfind  |     0 ]\n'</span>);
0041    fprintf(<span class="string">'  KaczScale : [ positive scalar         |     1 ]\n'</span>);
0042    fprintf(<span class="string">' quitPareto : [ 0=no, 1=yes             |     0 ]\n'</span>);
0043    fprintf(<span class="string">' minPareto  : [ positive integer        |     3 ]\n'</span>);
0044    fprintf(<span class="string">' lineSrchIt : [ positive integer        |     1 ]\n'</span>);
0045    fprintf(<span class="string">' feasSrchIt : [ positive integer        | 10000 ]\n'</span>);
0046    fprintf(<span class="string">' ignorePErr : [ 0=no, 1=yes             |     0 ]\n'</span>);
0047    fprintf(<span class="string">'\n'</span>);
0048    <span class="keyword">return</span>;
0049 <span class="keyword">end</span>
0050 
0051 Names = [
0052     <span class="string">'fid               '</span>
0053     <span class="string">'verbosity         '</span>
0054     <span class="string">'iterations        '</span>
0055     <span class="string">'nPrevVals         '</span>
0056     <span class="string">'bpTol             '</span>
0057     <span class="string">'optTol            '</span>
0058     <span class="string">'decTol            '</span>
0059     <span class="string">'stepMin           '</span>
0060     <span class="string">'stepMax           '</span>
0061     <span class="string">'rootMethod        '</span>
0062     <span class="string">'activeSetIt       '</span>
0063     <span class="string">'subspaceMin       '</span>
0064     <span class="string">'iscomplex         '</span>
0065     <span class="string">'maxMatvec         '</span>
0066     <span class="string">'weights           '</span>
0067     <span class="string">'omega             '</span>
0068     <span class="string">'project           '</span>
0069     <span class="string">'primal_norm       '</span>
0070     <span class="string">'dual_norm         '</span>
0071     <span class="string">'Kaczmarz          '</span>
0072     <span class="string">'KaczScale         '</span>
0073     <span class="string">'quitPareto        '</span>
0074     <span class="string">'minPareto         '</span>
0075     <span class="string">'lineSrchIt        '</span>
0076     <span class="string">'feasSrchIt        '</span>
0077     <span class="string">'ignorePErr        '</span> <span class="keyword">...</span>
0078     ];
0079 [m,n] = size(Names);
0080 names = lower(Names);
0081 
0082 <span class="comment">% Combine all leading options structures o1, o2, ... in l1Set(o1,o2,...).</span>
0083 options = [];
0084 <span class="keyword">for</span> j = 1:m
0085    eval([<span class="string">'options.'</span> Names(j,:) <span class="string">'= [];'</span>]);
0086 <span class="keyword">end</span>
0087 i = 1;
0088 <span class="keyword">while</span> i &lt;= nargin
0089    arg = varargin{i};
0090    <span class="keyword">if</span> ischar(arg), <span class="keyword">break</span>; <span class="keyword">end</span>
0091    <span class="keyword">if</span> ~isempty(arg)                      <span class="comment">% [] is a valid options argument</span>
0092        <span class="keyword">if</span> ~isa(arg,<span class="string">'struct'</span>)
0093           error(sprintf([<span class="string">'Expected argument %d to be a string parameter name '</span> <span class="keyword">...</span>
0094                <span class="string">'or an options structure\ncreated with OPTIMSET.'</span>], i));
0095       <span class="keyword">end</span>
0096       <span class="keyword">for</span> j = 1:m
0097           <span class="keyword">if</span> any(strcmp(fieldnames(arg),deblank(Names(j,:))))
0098              eval([<span class="string">'val = arg.'</span> Names(j,:) <span class="string">';'</span>]);
0099           <span class="keyword">else</span>
0100              val = [];
0101           <span class="keyword">end</span>
0102           <span class="keyword">if</span> ~isempty(val)
0103              eval([<span class="string">'options.'</span> Names(j,:) <span class="string">'= val;'</span>]);
0104          <span class="keyword">end</span>
0105       <span class="keyword">end</span>
0106    <span class="keyword">end</span>
0107    i = i + 1;
0108 <span class="keyword">end</span>
0109 
0110 <span class="comment">% A finite state machine to parse name-value pairs.</span>
0111 <span class="keyword">if</span> rem(nargin-i+1,2) ~= 0
0112    error(<span class="string">'Arguments must occur in name-value pairs.'</span>);
0113 <span class="keyword">end</span>
0114 expectval = 0;                          <span class="comment">% start expecting a name, not a value</span>
0115 <span class="keyword">while</span> i &lt;= nargin
0116    arg = varargin{i};
0117    
0118    <span class="keyword">if</span> ~expectval
0119       <span class="keyword">if</span> ~ischar(arg)
0120          error(sprintf(<span class="string">'Expected argument %d to be a string parameter name.'</span>, i));
0121       <span class="keyword">end</span>
0122       
0123       lowArg = lower(arg);
0124       j = strmatch(lowArg,names);
0125       <span class="keyword">if</span> isempty(j)                       <span class="comment">% if no matches</span>
0126          error(sprintf(<span class="string">'Unrecognized parameter name ''%s''.'</span>, arg));
0127       <span class="keyword">elseif</span> length(j) &gt; 1                <span class="comment">% if more than one match</span>
0128          <span class="comment">% Check for any exact matches (in case any names are subsets of others)</span>
0129          k = strmatch(lowArg,names,<span class="string">'exact'</span>);
0130          <span class="keyword">if</span> length(k) == 1
0131             j = k;
0132          <span class="keyword">else</span>
0133             msg = sprintf(<span class="string">'Ambiguous parameter name ''%s'' '</span>, arg);
0134             msg = [msg <span class="string">'('</span> deblank(Names(j(1),:))];
0135             <span class="keyword">for</span> k = j(2:length(j))'
0136                msg = [msg <span class="string">', '</span> deblank(Names(k,:))];
0137             <span class="keyword">end</span>
0138             msg = sprintf(<span class="string">'%s).'</span>, msg);
0139             error(msg);
0140          <span class="keyword">end</span>
0141       <span class="keyword">end</span>
0142       expectval = 1;                      <span class="comment">% we expect a value next</span>
0143       
0144    <span class="keyword">else</span>
0145       eval([<span class="string">'options.'</span> Names(j,:) <span class="string">'= arg;'</span>]);
0146       expectval = 0;
0147       
0148    <span class="keyword">end</span>
0149    i = i + 1;
0150 <span class="keyword">end</span>
0151 
0152 <span class="keyword">if</span> expectval
0153    error(sprintf(<span class="string">'Expected value for parameter ''%s''.'</span>, arg));
0154 <span class="keyword">end</span>
0155</pre></div>
<hr><address>Generated on Sun 09-Jun-2013 02:08:02 by <strong><a href="http://www.artefact.tk/software/matlab/m2html/" target="_parent">m2html</a></strong> &copy; 2005</address>
</body>
</html>